<canvas height=300 width=300 id="slate"></canvas>
<button id="clear">Reset</button>
<button id="easy">Easy</button>
<button id="med">Medium</button>
<button id="hard">Hard</button>

<script>
var c = document.getElementById("slate");
var ctx = c.getContext("2d");

var clr = document.getElementById("clear");
var eas = document.getElementById("easy");
var med = document.getElementById("med");
var hrd = document.getElementById("hard");

var powerups = [];
var paddlev = 0;
var pycor = window.height/2 - 15;
var pxcor = 30;

var pad = new Image();
pad.src = "paddle.png";

var ball = new Image();
ball.src = "ball.png";

ctx.fillStyle = "#f0f000";
ctx.strokeStyle = "#00f0f0";

var xcor;
var ycor;
var yv = 0;
var xv = 0;

var pscore;
var cscore;

var exist = false;
var run = false;
var difficulty = 1;

var start = function(e){
  e.preventDefault();
  c.setAttribute("width",window.width);
  c.setAttribute("height",window.height);
  if (! exist){
      xcor = window.width - 50;
      ycor = window.height/2;
      yv = -20;
      xv = Math.Random() * 40 - 20;
      exist = ! exist;
      run = true;

Window.requestAnimationFrame(play);
  }
  if (! run){
run = ! run;
	Window.requestAnimationFrame(play);
    
  } 
}

var clear = function(e){
	e.preventDefault();
	exist = false;
	run = false;
	ctx.clearRect(0,0,c.width,c.height);
	Window.cancelAnimationFrame(play);
	}

var play = function(){
	ctx.clearRect(0,0,c.width,c.height);
movePaddle();	
moveBall();
	checkScore();
if (run){
		Window.requestAnimationFrame(play);
}
}

var movePaddle = function(){
	pycor = pycor + paddlev;
	ctx.drawImage(pad, window.width - 5, pycor, 5, 30);
}

var moveBall = function(){
	if (xcor > window.width - 30 || xcor <  30){
		xv *= -1
		//needs to take note of paddles
}
if (ycor > window.height - 30 || ycor <  30){
		yv  *= -1
}
xcor += xv;
	ycor += yv;
ctx.drawImage(ball, xcor, ycor, 5, 5);
ctx.drawImage(pad, window.width - 5, pycor, 5, 30);
}

var checkScore = function(){
	if (xcor > window.width - 30
		pscore = pscore + 1;
		BallReset()
	}
	if (xcor <  30){
		cscore = cscore + 1;
		BallReset()
	}
	
}

var ballReset = function(){
	xcor = window.width/2;
	ycor = window.height/2;
	xv = 20 * math.random() - 10;
	yv = 20 * math.random() - 10;
	
}


var paddleUpdate = function(e){
	key = e.keyCode;
	if (paddlev == 0){
		paddlev = 10;}
if (key == 38){
		paddlev = math.abs(paddlev);
}
else if (key == 40){
		paddlev = -1 * math.abs(paddlev);
	}
}

var paddleUpdate2 = function(e){
	key = e.keyCode;
if (key == 38 && paddlev > 0){
		paddlev = 0;
}
else if (key == 40 && paddlev < 0){
		paddlev = 0;
	}
}

c.addEventListener("keyup",paddleUpdate2);
c.addEventListener("keydown", paddleUpdate);
</script>


